<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8"/>
	<title>홈</title>
	<style>
		.maze-grid {
		  display: grid;
		  gap: 2px;
		  margin-top: 20px;
		}
	
		.cell {
		  width: 25px;
		  height: 25px;
		  border: 1px solid #ccc;
		  box-sizing: border-box;
		}
	
		.wall { background-color: black; }
		.path { background-color: white; }
		.start { background-color: white; }
		.end { background-color: crimson; }
		.player { background-color: limegreen !important; }
	
		/* 랭킹 강조 */
		.my-rank {
		  background-color: #d1ffd1 !important;
		  font-weight: bold;
		}
	</style>
	<link rel="stylesheet" href="/simulation.css">
	
</head>
<body>
<h2>환영합니다!</h2>

<form method="post" action="/auth/logout">
	<button type="submit">로그아웃</button>
</form>

<button onclick="openRanking()">랭킹 보기</button>
<button onclick="location.href='/algorithm-description'">알고리즘 설명 보기</button>


<div id="rankingModal" style="
    display:none; position:fixed; top:0; left:0; width:100vw; height:100vh;
    background: rgba(0,0,0,0.5); justify-content:center; align-items:center;
  ">
	<iframe id="rankingIframe" src="/ranking" style="width:60vw; height:80vh; border:none; background:white;"></iframe>
</div>

<label for="size">미로 사이즈:</label>
<input type="number" id="size" name="size" step="2"
       min="3"
       onwheel="return false"
       style="width: 80px; padding: 5px; font-size: 16px;" />
<button onclick="generateMaze()">미로 생성</button>

<p id="error" style="color: red;"></p>


<h3>생성된 미로:</h3>
<div id="mazeContainer"></div>

<div id="resultPanel" style="display:none; position:absolute; right:0; top:0; width:250px; background:#f4f4f4; padding:10px; border-left:2px solid #ccc;">
	<h3>📊 경로 비교</h3>
	<ul id="resultList"></ul>
</div>


<script src="/js/maze.js"></script> <!-- JS 파일 외부로 분리 -->

<script>
	function openRanking() {
	  const modal = document.getElementById('rankingModal');
	  const iframe = document.getElementById('rankingIframe');

	  // iframe 새로고침해서 최신 데이터 요청
	  iframe.contentWindow.location.reload();

	  modal.style.display = 'flex';
	}

	function closeRanking() {
	  document.getElementById('rankingModal').style.display = 'none';
	}
</script>
</body>
</html>
